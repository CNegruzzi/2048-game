!function(){"use strict";var t=new(function(){var t;function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];if(!(this instanceof r))throw TypeError("Cannot call a class as a function");this.board=t,this.score=0,this.status="idle"}return t=[{key:"moveLeft",value:function(){if("playing"!==this.status)return!1;for(var t=JSON.stringify(this.board),r=function(t){for(var r=t.filter(function(t){return 0!==t});r.length<4;)r.push(0);return r},e=0;e<4;e++){this.board[e]=r(this.board[e]);for(var s=0;s<3;s++)this.board[e][s]===this.board[e][s+1]&&(this.board[e][s]+=this.board[e][s+1],this.board[e][s+1]=0,this.score+=this.board[e][s],s++);this.board[e]=r(this.board[e])}return t!==JSON.stringify(this.board)}},{key:"moveRight",value:function(){for(var t=JSON.stringify(this.board),r=function(t){for(var r=t.filter(function(t){return 0!==t});r.length<4;)r.unshift(0);return r},e=0;e<4;e++){this.board[e]=r(this.board[e]);for(var s=0;s<3;s++)this.board[e][s]===this.board[e][s+1]&&(this.board[e][s]+=this.board[e][s+1],this.board[e][s+1]=0,this.score+=this.board[e][s],s++);this.board[e]=r(this.board[e])}return t!==JSON.stringify(this.board)}},{key:"moveUp",value:function(){for(var t=JSON.stringify(this.board),r=function(t){for(var r=t.filter(function(t){return 0!==t});r.length<4;)r.push(0);return r},e=0;e<4;e++){for(var s=[],a=0;a<4;a++)s.push(this.board[a][e]);s=r(s);for(var o=0;o<3;o++)s[o]===s[o+1]&&(s[o]+=s[o+1],s[o+1]=0,this.score+=s[o],o++);s=r(s);for(var i=0;i<4;i++)this.board[i][e]=s[i]}return t!==JSON.stringify(this.board)}},{key:"moveDown",value:function(){for(var t=JSON.stringify(this.board),r=function(t){for(var r=t.filter(function(t){return 0!==t});r.length<4;)r.push(0);return r},e=0;e<4;e++){for(var s=[],a=0;a<4;a++)s.push(this.board[a][e]);s.reverse(),s=r(s);for(var o=0;o<3;o++)s[o]===s[o+1]&&(s[o]+=s[o+1],s[o+1]=0,this.score+=s[o],o++);(s=r(s)).reverse();for(var i=0;i<4;i++)this.board[i][e]=s[i]}return t!==JSON.stringify(this.board)}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){for(var t=0;t<4;t++)for(var r=0;r<4;r++)if(2048===this.board[t][r])return this.status="win",this.status;return this.board.some(function(t){return t.includes(0)})||!function(t){for(var r=0;r<4;r++)for(var e=0;e<4;e++)if(e<3&&t[r][e]===t[r][e+1]||r<3&&t[r][e]===t[r+1][e])return!0;return!1}(this.board)&&(this.status="lose"),this.status}},{key:"start",value:function(){"idle"===this.status&&(this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0),this.status="playing",this.addRandomTiles(),this.addRandomTiles()}},{key:"restart",value:function(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle"}},{key:"addRandomTiles",value:function(){for(var t=[],r=0;r<4;r++)for(var e=0;e<4;e++)0===this.board[r][e]&&t.push({row:r,col:e});var s=t[Math.floor(Math.random()*t.length)];this.board[s.row][s.col]=.9>Math.random()?2:4}}],function(t,r){for(var e=0;e<r.length;e++){var s=r[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}(r.prototype,t),r}()),r=document.querySelector(".game-score"),e=document.querySelector(".button.start"),s=document.querySelector(".message-win"),a=document.querySelector(".message-lose"),o=document.querySelector(".message-start");function i(){var e=t.getState();document.querySelectorAll(".field-cell").forEach(function(t,r){var s=e[Math.floor(r/4)][r%4];t.textContent=0===s?"":s,t.className="field-cell",s&&(t.classList.add("field-cell--".concat(s)),(2===s||4===s)&&t.classList.add("new"))}),r.textContent=t.getScore();var i=t.getStatus();s.classList.toggle("hidden","win"!==i),a.classList.toggle("hidden","lose"!==i),o.classList.toggle("hidden","idle"!==i)}e.addEventListener("click",function(){e.classList.contains("start")?(t.start(),i(),e.classList.remove("start"),e.classList.add("restart"),e.textContent="Restart"):e.classList.contains("restart")&&(t.restart(),i(),e.classList.remove("restart"),e.classList.add("start"),e.textContent="Start")}),document.addEventListener("keydown",function(r){if("playing"===t.getStatus()){r.preventDefault();var e=!1,s=JSON.stringify(t.getState());switch(r.key){case"ArrowUp":e=t.moveUp();break;case"ArrowDown":e=t.moveDown();break;case"ArrowLeft":e=t.moveLeft();break;case"ArrowRight":e=t.moveRight()}var a=JSON.stringify(t.getState());e&&s!==a&&(t.addRandomTiles(),i())}}),i()}();
//# sourceMappingURL=2048-game.63b28bbb.js.map
